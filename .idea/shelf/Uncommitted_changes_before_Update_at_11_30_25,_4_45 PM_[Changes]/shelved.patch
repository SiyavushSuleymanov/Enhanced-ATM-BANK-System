Index: UI.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import datetime\nimport tkinter as tk\nfrom tkinter import Frame, ttk\nfrom PIL import Image\n\nfrom transaction import BankAccount, users\n\n\nPRIMARY_COLOR = \"#007BFF\"\nSECONDARY_COLOR = \"#6c757d\"\nSUCCESS_COLOR = \"#28a745\"\nDANGER_COLOR = \"#dc3545\"\nBACKGROUND_COLOR = \"#f7f7f7\"\nFOREGROUND_COLOR = \"#333333\"\n\nMAIN_FONT = (\"Helvetica\", 20)\nTITLE_FONT = (\"Helvetica\", 30, \"bold\")\nWINDOW_WIDTH = 1000\nWINDOW_HEIGHT = 800\n\n\nclass App(tk.Tk):\n    def __init__(self):\n        tk.Tk.__init__(self)\n        self.current_user = None\n        self.frames = {}\n        self.style = ttk.Style(self)\n        self.style.theme_use('clam')\n        self.style.configure('TFrame', background=\"white\")\n        self.style.configure('TLabel', background=\"white\", font=MAIN_FONT, foreground=FOREGROUND_COLOR)\n        self.style.configure('Title.TLabel', font=TITLE_FONT, foreground=PRIMARY_COLOR)\n        self.style.configure('SubTitle.TLabel', font=(\"Segoe UI\", 20, \"bold\"), foreground=FOREGROUND_COLOR)\n        self.style.configure('Primary.TButton', font=(\"Segoe UI\", 16, \"bold\"), background=PRIMARY_COLOR,\n                             foreground=\"white\", borderwidth=0, relief=\"flat\", padding=15)\n        self.style.map('Primary.TButton', background=[('active', '#0056b3')])\n        self.style.configure('Success.TButton', font=(\"Segoe UI\", 16, \"bold\"), background=SUCCESS_COLOR,\n                             foreground=\"white\", borderwidth=0, relief=\"flat\", padding=15)\n        self.style.map('Success.TButton', background=[('active', '#1e7e34')])\n        self.style.configure('Danger.TButton', font=(\"Segoe UI\", 16, \"bold\"), background=DANGER_COLOR,\n                             foreground=\"white\", borderwidth=0, relief=\"flat\", padding=15)\n        self.style.map('Danger.TButton', background=[('active', '#c82333')])\n        self.style.configure('Secondary.TButton', font=(\"Segoe UI\", 14), background=SECONDARY_COLOR, foreground=\"white\",\n                             borderwidth=0, relief=\"flat\", padding=10)\n        self.style.map('Secondary.TButton', background=[('active', '#5a6268')])\n        self.style.configure('TEntry', font=MAIN_FONT, padding=5, fieldbackground=\"white\")\n        try:\n            image_path = \"ufaz_vector_bg.png\"\n            original_image = Image.open(image_path)\n            resized_image = original_image.resize((WINDOW_WIDTH, WINDOW_HEIGHT), Image.LANCZOS)\n            self.bg_image = Image.PhotoImage(resized_image)\n            background_label = tk.Label(self, image=self.bg_image)\n            background_label.image = self.bg_image\n            background_label.place(x=0, y=0, relwidth=1, relheight=1)\n            container = Frame(self)\n        except FileNotFoundError:\n            print(f\"WARNING: Image {image_path} not found. Using default background.\")\n            container = Frame(self, bg=BACKGROUND_COLOR)\n        except Exception as e:\n            print(f\"ERROR: A problem occurred while loading the image: {e}\")\n            container = Frame(self, bg=BACKGROUND_COLOR)\n        container.pack(fill=\"both\", expand=True, padx=20, pady=20)\n        container.grid_rowconfigure(0, weight=1)\n        container.grid_columnconfigure(0, weight=1)\n        for F in (LoginPage, MainMenu, DepositPage, TransferPage, HistoryPage, WithdrawPage, LoadingPage):\n            page_name = F.__name__\n            frame = F(parent=container, controller=self)\n            self.frames[page_name] = frame\n            frame.grid(row=0, column=0, sticky='nsew')\n        self.show_frame(\"LoginPage\")\n    def show_frame(self, page_name, transition_time_ms=0):\n        if transition_time_ms > 0:\n            loading_frame = self.frames[\"LoadingPage\"]\n            if hasattr(loading_frame, \"update_page\"):\n                loading_frame.update_page()\n            loading_frame.tkraise()\n            def switch_to_target():\n                frame = self.frames[page_name]\n                if hasattr(frame, \"update_page\"):\n                    frame.update_page()\n                frame.tkraise()\n            self.after(transition_time_ms, switch_to_target)\n        else:\n            frame = self.frames[page_name]\n            if hasattr(frame, \"update_page\"):\n                frame.update_page()\n            frame.tkraise()\n\nclass LoadingPage(ttk.Frame):\n    def __init__(self, parent, controller):\n        ttk.Frame.__init__(self, parent)\n        self.controller = controller\n        for i in range(5): self.grid_rowconfigure(i, weight=1)\n        for j in range(5): self.grid_columnconfigure(j, weight=1)\n        ttk.Label(self, text=\"Processing Transaction...\",\n                  font=(\"Segoe UI\", 24, \"bold\"),\n                  foreground=PRIMARY_COLOR).grid(row=1, column=2, padx=50, pady=(50, 10))\n        self.spinner = ttk.Progressbar(self, orient=\"horizontal\", length=300, mode=\"indeterminate\")\n        self.spinner.grid(row=2, column=2, padx=50, pady=20)\n        ttk.Label(self, text=\"Redirecting to Login...\",\n                  font=(\"Segoe UI\", 14),\n                  foreground=SECONDARY_COLOR).grid(row=3, column=2, padx=50, pady=(10, 50))\n    def update_page(self):\n        self.spinner.start(10)\n\nclass LoginPage(ttk.Frame):\n    def __init__(self, parent, controller):\n        ttk.Frame.__init__(self, parent)\n        self.controller = controller\n        for i in range(10): self.grid_rowconfigure(i, weight=1)\n        for j in range(10): self.grid_columnconfigure(j, weight=1)\n        title = ttk.Label(self, text=\"UFAZ BANK \uD83D\uDCB3\", style='Title.TLabel')\n        title.grid(row=1, column=1, columnspan=8, pady=50, sticky=\"n\")\n        entered_username = ttk.Label(self, text=\"Username :\", font=(\"Segoe UI\", 20, \"bold\"))\n        entered_username.grid(row=3, column=2, columnspan=3, sticky=\"e\", padx=10, pady=20)\n        self.usr = ttk.Entry(self, style='TEntry',font=(\"Helvetica\", 16, \"bold\"))\n        self.usr.focus_set()\n        self.usr.grid(row=3, column=5, columnspan=3, sticky=\"w\", padx=10, pady=20)\n        self.usr.bind(\"<Return>\", self.login_user)\n        pin = ttk.Label(self, text=\"PIN :\", font=(\"Segoe UI\", 18, \"bold\"))\n        pin.grid(row=4, column=2, columnspan=3, sticky=\"e\", padx=10, pady=20)\n        login_button = ttk.Button(self, text=\"Login\", command=self.login_user, style='Primary.TButton')\n        login_button.grid(row=5, column=2, columnspan=6, pady=40, sticky=\"ew\")\n        self.error_label = ttk.Label(self, text=\"\", foreground=DANGER_COLOR, background=\"white\")\n        self.error_label.grid(row=6, column=2, columnspan=6, pady=5, sticky=\"n\")\n        self.pin = \"\"\n    def login_user(self, k=0):\n        self.usr.config(state=\"disabled\")\n        # WORKING ON...\n        pin_len = 4\n        def pressed(ent_digit):\n            if ent_digit.keysym.isdigit() and len(str(self.pin)) != 4:\n                self.pin += ent_digit.keysym\n                upgrade()\n                if upgrade() == 1:\n                    self.pin = self.pin[:4] # OUR ENTERED 4-digit PIN - (result)\n                    self.l = True\n                    # print(int(self.pin))\n                    return 0\n            elif ent_digit.keysym == \"BackSpace\":\n                if type(self.pin) == str:\n                    delete()\n                    self.pin = self.pin[:-1]\n                elif type(self.pin) == int:\n                    pass\n\n        def upgrade(): # Upgrades dot list\n            try:\n                if len(self.pin) <= pin_len:\n                    dot_list[len(self.pin) - 1].config(text='◉', font=(\"Arial\", 30), foreground=\"blue\")\n                if len(self.pin) == pin_len:\n                    return 1\n            except IndexError:\n                pass\n\n        def delete():\n            if len(self.pin) <= pin_len:\n                dot_list[len(self.pin) - 1].config(text='〇', font=(\"Arial\", 30), foreground=\"blue\")\n\n        frm = ttk.Frame(self)\n        frm.grid(row=4, column=3, columnspan=5, padx=10, pady=20)\n        dot_list = []\n        for _ in range(pin_len):\n            dot = ttk.Label(frm, text='〇', font=('Arial', 30), foreground=\"blue\")\n            dot.pack(side=\"left\")\n            dot_list.append(dot)\n\n        self.focus_set()\n        self.bind('<Key>', pressed)\n        # WORKING ON...\n\n        usr_input = self.usr.get().capitalize()\n        from transaction import users\n        self.error_label.config(text=\"\")\n        user_found = False\n        for current_user_ind in range(len(users)):\n            user_data = users[current_user_ind]\n            if usr_input == user_data[\"name\"]:\n                user_found = True\n                usr = BankAccount(user_data[\"name\"], user_data[\"pin\"], user_data[\"balance\"], user_data[\"transactions\"],\n                                  user_data[\"wrong_tries\"])\n                usr.blocked = user_data[\"blocked\"]\n                self.current_user_ind = current_user_ind\n                if usr.blocked:\n                    self.error_label.config(text=\"❌ Card is blocked\", foreground=DANGER_COLOR)\n                    return\n                try:\n                    if int(self.pin) == user_data[\"pin\"]:\n                        users[current_user_ind][\"wrong_tries\"] = 0\n                        self.controller.current_user = usr\n                        self.usr.delete(0, tk.END)\n                        self.controller.show_frame(\"MainMenu\", transition_time_ms=1500)\n                    else:\n                        users[current_user_ind][\"wrong_tries\"] += 1\n                        if users[current_user_ind][\"wrong_tries\"] < 3:\n                            self.error_label.config(\n                                text=f\"❌ Incorrect PIN ({3 - users[current_user_ind]['wrong_tries']} tries left)\",\n                                foreground=DANGER_COLOR)\n                            self.pin = \"\"\n                            for dot in dot_list:\n                                dot.config(text='〇', font=('Arial', 30), foreground=\"blue\")\n                            self.focus_set()\n                        else:\n                            usr.blocked = True\n                            users[current_user_ind][\"blocked\"] = True\n                            self.error_label.config(text=\"❌ Card is blocked (Max tries exceeded)\", foreground=DANGER_COLOR)\n                            break\n                except ValueError:\n                    pass #print(\"Continue..\")\n                break\n        if not user_found:\n            self.error_label.config(text=\"❌ User not found\", foreground=DANGER_COLOR)\n            self.usr.config(state=\"normal\")\n            dot_list = []\n            self.pin = \"\"\n\n    def logout(self):\n        self.controller.current_user = None\n        self.controller.show_frame(\"LoginPage\", transition_time_ms=1500)\n\nclass MainMenu(ttk.Frame):\n    def __init__(self, parent, controller):\n        ttk.Frame.__init__(self, parent)\n        self.controller = controller\n        for i in range(10): self.grid_rowconfigure(i, weight=1)\n        for j in range(5): self.grid_columnconfigure(j, weight=1)\n        self.current_user_label = ttk.Label(self, text=\"\", style='SubTitle.TLabel', foreground=PRIMARY_COLOR)\n        self.current_user_label.grid(row=0, column=1, columnspan=3, pady=40, sticky=\"n\")\n        self.deposit_button = ttk.Button(self, text=\"\uD83D\uDCB0 Deposit\", style='Primary.TButton',\n                                         command=lambda: controller.show_frame(\"DepositPage\", transition_time_ms=3000))\n        self.deposit_button.grid(row=2, column=1, pady=20, padx=40, sticky=\"ew\")\n        self.transfer_button = ttk.Button(self, text=\"\uD83D\uDCB8 Transfer\", style='Primary.TButton',\n                                          command=lambda: controller.show_frame(\"TransferPage\",\n                                                                                transition_time_ms=3000))\n        self.transfer_button.grid(row=2, column=3, pady=20, padx=40, sticky=\"ew\")\n\n        self.withdraw_button = ttk.Button(self, text=\"Withdraw\", style='Primary.TButton',\n                                          command=lambda: controller.show_frame(\"WithdrawPage\",\n                                                                                transition_time_ms=3000))\n        self.withdraw_button.grid(row=3, column=1, pady=20, padx=40, sticky=\"ew\")\n        self.history_button = ttk.Button(self, text=\"History\", style='Primary.TButton',\n                                         command=lambda: controller.show_frame(\"HistoryPage\", transition_time_ms=3000))\n        self.history_button.grid(row=3, column=3, pady=20, padx=40, sticky=\"ew\")\n        self.logout_button = ttk.Button(self, text=\"Log Out\", style='Secondary.TButton', command=self.logout)\n        self.logout_button.grid(row=5, column=1, columnspan=3, pady=60, sticky=\"n\")\n    def update_page(self):\n        user = self.controller.current_user\n        if user:\n            self.current_user_label.config(text=f\"Welcome, {user.username} \uD83D\uDC4B\")\n        else:\n            self.current_user_label.config(text=\"Welcome, Guest\")\n    def logout(self):\n        self.controller.current_user = None\n        self.controller.show_frame(\"LoginPage\", transition_time_ms=1500)\nclass DepositPage(ttk.Frame):\n    def __init__(self, parent, controller):\n        ttk.Frame.__init__(self, parent)\n        self.controller = controller\n        for i in range(10): self.grid_rowconfigure(i, weight=1)\n        for j in range(4): self.grid_columnconfigure(j, weight=1)\n        ttk.Label(self, text=\"Deposit Money\", style='SubTitle.TLabel', foreground=SUCCESS_COLOR).grid(row=0, column=0,\n                                                                                                      columnspan=4,\n                                                                                                      padx=20, pady=30,\n                                                                                                      sticky=\"n\")\n        self.current_user_label = ttk.Label(self, text=\"\")\n        self.current_user_label.grid(row=1, column=0, columnspan=2, padx=40, pady=10, sticky=\"w\")\n        self.balance_label = ttk.Label(self, text=\"\")\n        self.balance_label.grid(row=2, column=0, padx=40, pady=5, sticky=\"w\")\n        self.update_balance_button = ttk.Button(self, text=\"Show Balance\", command=self.show_balance_func,\n                                                style='Primary.TButton')\n        self.update_balance_button.grid(row=2, column=1, padx=20, pady=5, sticky=\"w\")\n        ttk.Label(self, text=\"Amount:\", font=(\"Segoe UI\", 18, \"bold\")).grid(row=4, column=0, padx=40, pady=30,\n                                                                            sticky=\"e\")\n        self.amount = ttk.Entry(self, style='TEntry')\n        self.amount.grid(row=4, column=1, columnspan=2, padx=20, pady=30, sticky=\"ew\")\n        deposit_button_style = {'style': 'Success.TButton'}\n        self.deposit_button = ttk.Button(self, text=\"Deposit\", command=self.deposit_action, **deposit_button_style)\n        self.deposit_button.grid(row=5, column=0, columnspan=4, pady=20, padx=20, sticky=\"ew\")\n        self.MainMenu_button = ttk.Button(self, text=\"← Main Menu\", command=lambda: controller.show_frame(\"MainMenu\"),\n                                          style='Secondary.TButton')\n        self.MainMenu_button.grid(row=8, column=0, columnspan=4, pady=50, padx=20, sticky=\"ew\")\n        self.result_label = ttk.Label(self, text=\"\")\n        self.result_label.grid(row=6, column=0, columnspan=4, sticky=\"n\")\n\n    def deposit_action(self):\n        try:\n            amount_val = float(self.amount.get())\n            if amount_val <= 0:\n                self.result_label.config(text=\"❌ Please enter a valid amount.\", foreground=DANGER_COLOR)\n                return\n        except ValueError:\n            self.result_label.config(text=\"❌ Invalid amount format.\", foreground=DANGER_COLOR)\n            return\n        from transaction import BankAccount\n        BankAccount.deposit_money(self.controller.current_user, amount_val, self.current_user_ind)\n        self.amount.delete(0, tk.END)\n        self.balance_label.config(text=f\"Balance: $******\")\n        self.result_label.config(text=f\"✅ Deposit successful: ${amount_val}\", foreground=SUCCESS_COLOR)\n        self.controller.current_user = None\n        self.after(500, lambda: self.controller.show_frame(\"LoginPage\", transition_time_ms=3000))\n    def show_balance_func(self):\n        user = self.controller.current_user\n        self.balance_label.config(text=f\"Balance: ${user.balance}\")\n    def update_page(self):\n        user = self.controller.current_user\n        if user:\n            from transaction import users\n            for i in range(len(users)):\n                if users[i][\"name\"] == user.username:\n                    self.current_user_ind = i\n                    break\n            self.current_user_label.config(text=f\"User: {user.username}\")\n            self.balance_label.config(text=\"Balance: $******\")\n            self.result_label.config(text=\"\")  # Mesajları təmizlə\n        else:\n            self.current_user_label.config(text=\"User: Guest\")\n            self.balance_label.config(text=\"Balance: $0\")\nclass TransferPage(ttk.Frame):\n    def __init__(self, parent, controller):\n        ttk.Frame.__init__(self, parent)\n        self.controller = controller\n        for i in range(10): self.grid_rowconfigure(i, weight=1)\n        for j in range(4): self.grid_columnconfigure(j, weight=1)\n        ttk.Label(self, text=\"Transfer Money\", style='SubTitle.TLabel', foreground=PRIMARY_COLOR).grid(row=0, column=0,\n                                                                                                       columnspan=4,\n                                                                                                       padx=20, pady=30,\n                                                                                                       sticky=\"n\")\n        self.current_user_label = ttk.Label(self, text=\"\")\n        self.current_user_label.grid(row=1, column=0, columnspan=2, padx=40, pady=10, sticky=\"w\")\n        self.balance_label = ttk.Label(self, text=\"\")\n        self.balance_label.grid(row=2, column=0, padx=40, pady=5, sticky=\"w\")\n        ttk.Button(self, text=\"Show Balance\", command=self.show_balance_func, style='Secondary.TButton').grid(\n            row=2, column=1, padx=20, pady=5, sticky=\"w\"\n        )\n        ttk.Button(self, text=\"← Main Menu\", command=lambda: controller.show_frame(\"MainMenu\"),\n                   style='Secondary.TButton').grid(\n            row=9, column=0, columnspan=4, pady=50, padx=20, sticky=\"ew\"\n        )\n        ttk.Label(self, text=\"Amount:\").grid(row=4, column=0, padx=40, pady=20, sticky=\"e\")\n        self.trsmoney = ttk.Entry(self, style='TEntry')\n        self.trsmoney.grid(row=4, column=1, columnspan=2, padx=20, pady=20, sticky=\"ew\")\n        ttk.Label(self, text=\"Receiver:\").grid(row=5, column=0, padx=40, pady=20, sticky=\"e\")\n        self.recvr_var = tk.StringVar()\n        self.recvr_var.trace_add(\"write\", self.check_receiver)\n        self.recvr = ttk.Entry(self, textvariable=self.recvr_var, style='TEntry')\n        self.recvr.grid(row=5, column=1, columnspan=2, padx=20, pady=20, sticky=\"ew\")\n        self.receiver_status = ttk.Label(self, text=\"\")\n        self.receiver_status.grid(row=6, column=1, columnspan=2, padx=10, sticky=\"w\")\n        self.transfer_button = ttk.Button(self, text=\"Transfer\", command=self.transfer_action, style='Primary.TButton')\n        self.transfer_button.grid(row=7, column=0, columnspan=4, pady=30, padx=20, sticky=\"ew\")\n        self.transfer_button.config(state=\"disabled\")\n        self.result_label = ttk.Label(self, text=\"\")\n        self.result_label.grid(row=8, column=0, columnspan=4, sticky=\"n\")\n    def transfer_action(self):\n        from transaction import users\n        sender = self.controller.current_user\n        receiver_name = self.recvr.get().capitalize()\n        try:\n            amount = float(self.trsmoney.get())\n            if amount <= 0:\n                self.result_label.config(text=\"❌ Invalid amount.\", foreground=DANGER_COLOR)\n                return\n        except ValueError:\n            self.result_label.config(text=\"❌ Invalid amount format.\", foreground=DANGER_COLOR)\n            return\n        sender_ind = None\n        receiver_ind = None\n        for i, u in enumerate(users):\n            if u[\"name\"] == sender.username:\n                sender_ind = i\n            if u[\"name\"] == receiver_name:\n                receiver_ind = i\n        if sender_ind is None or receiver_ind is None:\n            self.result_label.config(text=\"❌ User not found!\", foreground=DANGER_COLOR)\n            return\n        result = sender.transfer_money(recvr=receiver_name, trsmoney=amount, ind=sender_ind, reind=receiver_ind)\n\n        if result.startswith(\"Transfer successful\"):\n            self.balance_label.config(text=f\"Balance: $******\")\n            self.result_label.config(text=f\"✅ {result}\", foreground=SUCCESS_COLOR)\n        else:\n            self.result_label.config(text=f\"❌ {result}\", foreground=DANGER_COLOR)\n        self.trsmoney.delete(0, tk.END)\n        self.controller.current_user = None\n        self.after(500, lambda: self.controller.show_frame(\"LoginPage\", transition_time_ms=3000))\n    def update_page(self):\n        user = self.controller.current_user\n        self.current_user_label.config(text=f\"User: {user.username}\")\n        self.balance_label.config(text=f\"Balance: $******\")\n        self.result_label.config(text=\"\")\n        self.receiver_status.config(text=\"\")\n        self.recvr_var.set(\"\")\n        self.trsmoney.delete(0, tk.END)\n    def show_balance_func(self):\n        user = self.controller.current_user\n        self.balance_label.config(text=f\"Balance: ${user.balance}\")\n    def check_receiver(self, *args):\n        from transaction import users\n        recvr = self.recvr_var.get().capitalize()\n        if recvr == \"\":\n            self.receiver_status.config(text=\"\")\n            self.transfer_button.config(state=\"disabled\")\n            return\n        current_username = self.controller.current_user.username\n        for u in users:\n            if u[\"name\"] == recvr:\n                if u[\"name\"] == current_username:\n                    self.receiver_status.config(text=\"✗ Cannot transfer to self\", foreground=DANGER_COLOR)\n                    self.transfer_button.config(state=\"disabled\")\n                    return\n                self.receiver_status.config(text=\"✓ User found\", foreground=SUCCESS_COLOR)\n                self.transfer_button.config(state=\"normal\")\n                return\n        self.receiver_status.config(text=\"✗ User not found\", foreground=DANGER_COLOR)\n        self.transfer_button.config(state=\"disabled\")\nclass HistoryPage(ttk.Frame):\n    def __init__(self, parent, controller):\n        ttk.Frame.__init__(self, parent)\n        self.controller = controller\n        ttk.Label(self, text=\"Transaction History\", style='SubTitle.TLabel', foreground=SECONDARY_COLOR).pack(pady=30)\n        list_frame = ttk.Frame(self)\n        list_frame.pack(pady=10, padx=20, fill=\"both\", expand=True)\n        scrollbar = ttk.Scrollbar(list_frame, orient=tk.VERTICAL)\n        self.list_box = tk.Listbox(list_frame, width=60, height=20, font=(\"Consolas\", 12), bg=\"white\", fg=\"#333333\",\n                                   selectbackground=PRIMARY_COLOR, yscrollcommand=scrollbar.set, bd=0, relief=\"flat\")\n        scrollbar.config(command=self.list_box.yview)\n        scrollbar.pack(side=tk.RIGHT, fill=tk.Y)\n        self.list_box.pack(side=tk.LEFT, fill=\"both\", expand=True)\n        self.back_button = ttk.Button(self, text=\"← Back to Main Menu\",\n                                      command=lambda: self.controller.show_frame(\"MainMenu\"), style='Secondary.TButton')\n        self.back_button.pack(pady=40)\n    def update_page(self):\n        self.list_box.delete(0, tk.END)\n        if self.controller.current_user and self.controller.current_user.trnsct_list:\n            for item in reversed(self.controller.current_user.trnsct_list):\n                self.list_box.insert(tk.END, item)\n        else:\n            self.list_box.insert(tk.END, \"No transactions yet.\")\nclass WithdrawPage(ttk.Frame):\n    def __init__(self, parent, controller):\n        ttk.Frame.__init__(self, parent)\n        self.controller = controller\n        for i in range(10): self.grid_rowconfigure(i, weight=1)\n        for j in range(4): self.grid_columnconfigure(j, weight=1)\n\n        ttk.Label(self, text=\"Withdraw Cash\", style='SubTitle.TLabel', foreground=DANGER_COLOR).grid(row=0, column=0,\n                                                                                                     columnspan=4,\n                                                                                                     padx=20, pady=30,\n                                                                                                     sticky=\"n\")\n        self.user_label = ttk.Label(self, text=\"\")\n        self.user_label.grid(row=1, column=0, columnspan=2, padx=40, pady=10, sticky=\"w\")\n        self.balance_label = ttk.Label(self, text=\"\")\n        self.balance_label.grid(row=2, column=0, padx=40, pady=5, sticky=\"w\")\n        self.update_balance_button = ttk.Button(self, text=\"Show Balance\", command=self.show_balance_func,\n                                                style='Secondary.TButton')\n        self.update_balance_button.grid(row=2, column=1, padx=20, pady=5, sticky=\"w\")\n        ttk.Label(self, text=\"Amount:\").grid(row=4, column=0, padx=40, pady=30, sticky=\"e\")\n        self.amount = ttk.Entry(self, style='TEntry')\n        self.amount.grid(row=4, column=1, columnspan=2, padx=20, pady=30, sticky=\"ew\")\n        self.result_label = ttk.Label(self, text=\"\")\n        self.result_label.grid(row=6, column=0, columnspan=4, sticky=\"n\")\n        ttk.Button(self, text=\"Withdraw\", command=self.withdraw_action, style='Danger.TButton').grid(row=5, column=0,\n                                                                                                     columnspan=4,\n                                                                                                     pady=20, padx=20,\n                                                                                                     sticky=\"ew\")\n        self.back_button = ttk.Button(self, text=\"← Main Menu\", command=lambda: self.controller.show_frame(\"MainMenu\"),\n                                      style='Secondary.TButton')\n        self.back_button.grid(row=8, column=0, columnspan=4, pady=50, padx=20, sticky=\"ew\")\n    def withdraw_action(self):\n        user = self.controller.current_user\n        try:\n            amount = float(self.amount.get())\n            if amount <= 0:\n                self.result_label.config(text=\"❌ Please enter a valid amount.\", foreground=DANGER_COLOR)\n                return\n        except ValueError:\n            self.result_label.config(text=\"❌ Invalid amount format.\", foreground=DANGER_COLOR)\n            return\n        user_ind = None\n        for i, u in enumerate(users):\n            if u[\"name\"] == user.username:\n                user_ind = i\n                break\n        result = user.withdraw_money(amount, user_ind)\n        if result.startswith(\"Withdraw successful\"):\n            self.balance_label.config(text=f\"Balance: $******\")\n            self.result_label.config(text=f\"✅ {result}\", foreground=SUCCESS_COLOR)\n        else:\n            self.result_label.config(text=f\"❌ {result}\", foreground=DANGER_COLOR)\n        self.amount.delete(0, tk.END)\n        self.controller.current_user = None\n        self.after(500, lambda: self.controller.show_frame(\"LoginPage\", transition_time_ms=3000))\n    def show_balance_func(self):\n        user = self.controller.current_user\n        self.balance_label.config(text=f\"Balance: ${user.balance}\")\n    def update_page(self):\n        user = self.controller.current_user\n        if user:\n            from transaction import users\n            user_ind = None\n            for i, u in enumerate(users):\n                if u[\"name\"] == user.username:\n                    user_ind = i\n                    break\n            if user_ind is not None:\n                self.user_label.config(text=f\"User: {user.username}\")\n                self.balance_label.config(text=\"Balance: $******\")\n                self.result_label.config(text=\"\")\n            else:\n                self.user_label.config(text=\"User: N/A\")\n                self.balance_label.config(text=\"Balance: $0\")\napp = App()\napp.geometry(f'{WINDOW_WIDTH}x{WINDOW_HEIGHT}')\napp.title('Modern ATM Interface')\napp.mainloop()
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/UI.py b/UI.py
--- a/UI.py	(revision 4b4dcaecb554d77244e316a25384e9c51523d645)
+++ b/UI.py	(date 1764503233884)
@@ -1,7 +1,7 @@
 import datetime
 import tkinter as tk
 from tkinter import Frame, ttk
-from PIL import Image
+#+from PIL import Image,ImageTK
 
 from transaction import BankAccount, users
 
